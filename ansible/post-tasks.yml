---
# Install Vim/Neo vim plugins
- name: Install Neo-Vim plugins
  command: nvim -c "PlugInstall" -c "qa"
  register: install_vim_plugin
  until: install_vim_plugin is successful
  when:
    - initial_config_link is successful
  tags:
    - install-vim-plugins

# GIT Config
- name: Set GIT e-mail
  git_config:
    name: user.email
    scope: global
    value: "dalisoft@mail.ru"
- name: Set GIT username
  git_config:
    name: user.name
    scope: global
    value: "dalisoft"

- name: Hide some applications
  become: true
  become_user: root
  lineinfile:
    path: "/usr/share/applications/{{ item }}.desktop"
    insertafter: "^Name= "
    line: NoDisplay=true
  loop:
    - nvim
    - openjdk-8-java
    - openjdk-8-policytool
    - groovyConsole
  when: ansible_os_family == 'Debian' or ansible_os_family == 'Pop!_OS'
