---
- name: Checking GoSublime on macOS
  stat:
    path: ~/Library/Application Support/Sublime Text 3/Packages/GoSublime
  register: gosublime_dir

- name: Installing Rust Analyzer Language Server on macOS
  become: yes
  shell: |
    wget -nc https://github.com/rust-analyzer/rust-analyzer/releases/latest/download/rust-analyzer-mac
    mv rust-analyzer-mac /usr/local/bin/rust-analyzer
    chmod +x /usr/local/bin/rust-analyzer
  args:
    chdir: ~/
  when:
    - force_install is true or not rust_analyzer_bin.stat.exists

- name: Installing Reason Language Server on macOS
  become: yes
  shell: |
    wget -nc https://github.com/jaredly/reason-language-server/releases/latest/download/rls-macos.zip
    unzip rls-macos.zip -d .
    mv rls-macos/reason-language-server /usr/local/bin/reason-language-server
    chmod +x /usr/local/bin/reason-language-server
    rm -rf rls-macos
    rm -rf rls-macos.zip
  args:
    chdir: ~/
  when:
    - force_install is true or not reason_bin.stat.exists

# VSCodium extensions
- name: VSCodium check on macOS
  stat:
    path: /Applications/VSCodium.app/Contents/Resources/app/bin/code
  register: code_bin
